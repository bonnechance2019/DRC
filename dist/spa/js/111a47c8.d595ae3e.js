(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["111a47c8"],{"2cd7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"col q-pt-md",staticStyle:{width:"300px"},attrs:{bordered:""}},[n("div",{staticClass:"q-pa-md"},[n("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{label:"新增",value:"add"},{label:"查詢",value:"search"}]},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),"add"==t.type?n("q-input",{ref:"restaurant_id",staticStyle:{width:"300px"},attrs:{outlined:"",value:t.restaurant_id,rules:[function(t){return!!t||"Field is required"}],label:"餐廳"},on:{input:function(e){return t.$emit("update:restaurant_id",e)}},scopedSlots:t._u([{key:"append",fn:function(){return[t.restaurant_id?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return t.$emit("update:restaurant_id","")}}}):t._e()]},proxy:!0}],null,!1,3394889754)}):t._e(),"search"==t.type?n("q-select",{ref:"restaurant_id",staticStyle:{width:"300px"},attrs:{filled:"",value:t.restaurant_id,rules:[function(t){return!!t||"Field is required"}],label:"餐廳","use-input":"","input-debounce":"0",options:t.options},on:{input:function(e){return t.$emit("update:restaurant_id",e)},filter:t.filterRestaurant},scopedSlots:t._u([{key:"append",fn:function(){return[t.restaurant_id?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return t.$emit("update:restaurant_id","")}}}):t._e()]},proxy:!0},{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[t._v("\n          No results\n        ")])],1)]},proxy:!0}],null,!1,1574843164)}):t._e()],1)},o=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),r=n.n(a),s=n("2f62");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={props:["restaurant_id"],data:function(){return{type:"search",options:this.restaurant}},computed:u({},Object(s["d"])("index",["restaurant"])),methods:{filterRestaurant:function(t,e){var n=this;e(""!==t?function(){var e=t.toLowerCase();n.options=n.restaurant.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}:function(){n.options=n.restaurant})}}},d=l,f=n("2877"),p=n("fe09"),h=Object(f["a"])(d,i,o,!1,null,null,null);e["default"]=h.exports;h.options.components=Object.assign({QCard:p["d"],QBtnToggle:p["c"],QInput:p["l"],QIcon:p["k"],QSelect:p["t"],QItem:p["m"],QItemSection:p["o"]},h.options.components||{})},"45ab":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-input",{directives:[{name:"select-all",rawName:"v-select-all"}],staticClass:"col",attrs:{outlined:"",label:"Search"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.searchField=""}},scopedSlots:t._u([{key:"append",fn:function(){return[""!==t.searchField?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.searchField=""}}}):t._e(),n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchField,callback:function(e){t.searchField=e},expression:"searchField"}})},o=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("386d"),n("c47a")),r=n.n(a),s=n("2f62"),c=n("5c3a");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={directives:{selectAll:c["a"]},computed:l({},Object(s["d"])("index",["search"]),{searchField:{get:function(){return this.search},set:function(t){this.setSearch(t)}}}),methods:l({},Object(s["b"])("index",["setSearch"]))},f=d,p=n("2877"),h=n("fe09"),m=Object(p["a"])(f,i,o,!1,null,null,null);e["default"]=m.exports;m.options.components=Object.assign({QInput:h["l"],QIcon:h["k"]},m.options.components||{})},4647:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-gutter-sm row"},[n("q-uploader",{staticStyle:{"max-width":"300px"},attrs:{url:t.dish_photo,label:"Individual upload",multiple:""}})],1)},o=[],a={props:["dish_photo"]},r=a,s=n("2877"),c=n("fe09"),u=Object(s["a"])(r,i,o,!1,null,null,null);e["default"]=u.exports;u.options.components=Object.assign({QUploader:c["C"]},u.options.components||{})},5638:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card-actions",{attrs:{align:"left"}},[n("q-btn",{attrs:{label:"Save",color:"secondary",type:"submit"}})],1)},o=[],a={},r=a,s=n("2877"),c=n("fe09"),u=Object(s["a"])(r,i,o,!1,null,null,null);e["default"]=u.exports;u.options.components=Object.assign({QCardActions:c["e"],QBtn:c["b"]},u.options.components||{})},"5c3a":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={inserted:function(t){var e=t.querySelector(".q-field__native");e.addEventListener("focus",(function(){e.value.length&&e.select()}))}}},8070:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"full-width full-height"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.handleContain()}}},[n("q-card-section",{staticClass:"q-pa-md"},[n("div",{staticClass:"row"},[n("search"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pr-lg",attrs:{flat:"",dense:"",icon:"highlight_off"}})],1),t._l(t.food,(function(e){return n("q-item",{directives:[{name:"show",rawName:"v-show",value:t.search,expression:"search"}],key:e.id,attrs:{dense:""}},[t._v("\n        "+t._s(e.name)+"\n        "),n("q-input",{staticStyle:{"max-width":"100px"},attrs:{dense:"",label:"幾克（升）",type:"text"},on:{input:function(n){t.foodQuantity[e.id-1].quantity=t.handleFoodQuantityType(t.foodQuantity[e.id-1].quantity)}},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(n){t.foodQuantity[e.id-1].quantity=0}}})]},proxy:!0}],null,!0),model:{value:t.foodQuantity[e.id-1].quantity,callback:function(n){t.$set(t.foodQuantity[e.id-1],"quantity",n)},expression:"foodQuantity[dishFood.id-1].quantity"}})],1)}))],2),n("q-card-section",{staticClass:"absolute-bottom"},[n("modal-buttons")],1)],1)])},o=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("a481"),n("c47a")),r=n.n(a),s=n("2f62");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={props:["containToSubmit"],data:function(){return{newFood:!0,foodQuantity:[]}},computed:u({},Object(s["d"])("index",["search","containTemp"]),{},Object(s["c"])("index",["food"])),methods:u({},Object(s["b"])("index",["clearSearch","setSearchType"]),{handleFoodQuantityType:function(t){return t=t.replace(/[^\d.]/g,""),t=t.replace(/\.{2,}/g,"."),t=t.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t=t.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3"),t.indexOf(".")<0&&""!=t&&(t=parseFloat(t)),t},handleContain:function(){for(var t=0;t<this.foodQuantity.length;t++){for(var e=0;e<this.containToSubmit.length;e++)this.containToSubmit[e].food==this.foodQuantity[t].food&&(this.newFood=!1,this.foodQuantity[t].quantity<=0?this.containToSubmit.splice(e,1):this.containToSubmit[e].quantity=this.foodQuantity[t].quantity);this.newFood&&this.foodQuantity[t].quantity>0&&this.containToSubmit.push(this.foodQuantity[t]),this.newFood=!0}this.clearSearch(),this.setSearchType("dishAdd"),this.$emit("close")}}),components:{search:n("45ab").default,"modal-buttons":n("5638").default},created:function(){for(var t=0;t<this.food.length;t++)this.foodQuantity.push({food:this.food[t].id,quantity:0});if(this.containToSubmit.length)for(var e=0;e<this.containToSubmit.length;e++)for(var n=0;n<this.foodQuantity.length;n++)this.containToSubmit[e].food==this.foodQuantity[n].food&&(this.foodQuantity[n].quantity=this.containToSubmit[e].quantity,n=this.foodQuantity.lenght)}},d=l,f=n("2877"),p=n("fe09"),h=Object(f["a"])(d,i,o,!1,null,null,null);e["default"]=h.exports;h.options.components=Object.assign({QCard:p["d"],QCardSection:p["f"],QBtn:p["b"],QItem:p["m"],QInput:p["l"],QIcon:p["k"]},h.options.components||{}),h.options.directives=Object.assign({ClosePopup:p["a"]},h.options.directives||{})},8431:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"q-pa-md absolute full-height full-width column"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("div",{staticClass:"row"},[n("modal-dish-name",{ref:"modalDishName",attrs:{name:t.dishToSubmit.name},on:{"update:name":function(e){return t.$set(t.dishToSubmit,"name",e)}}}),n("div",{staticClass:"q-pa-md"},[n("q-btn",{attrs:{label:"食材",color:"primary",type:"submit"},on:{click:function(e){t.showDishFood=!0,t.setSearchType("")}}})],1)],1),n("q-dialog",{model:{value:t.showDishFood,callback:function(e){t.showDishFood=e},expression:"showDishFood"}},[n("modal-dish-food",{ref:"modalDishFood",attrs:{containToSubmit:t.containToSubmit},on:{close:function(e){t.showDishFood=!1}}})],1),n("modal-dish-photo",{staticClass:"q-pb-md",attrs:{dish_photo:t.dishToSubmit.dish_photo},on:{"update:dish_photo":function(e){return t.$set(t.dishToSubmit,"dish_photo",e)}}}),n("modal-dish-restaurant",{ref:"modalDishRestaurant",attrs:{restaurant_id:t.dishToSubmit.restaurant_id},on:{"update:restaurant_id":function(e){return t.$set(t.dishToSubmit,"restaurant_id",e)}}}),!t.showDishFood&&t.containToSubmit.length?n("food-table",{attrs:{containToSubmit:t.containToSubmit,dishToSubmit:t.dishToSubmit}}):t._e(),n("modal-buttons")],1)])},o=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),r=n.n(a),s=n("2f62"),c=(n("7f7f"),{methods:{submitForm:function(){this.$refs.modalDishName.$refs.name.validate(),this.$refs.modalDishRestaurant.$refs.restaurant_id.validate(),this.$refs.modalDishName.$refs.name.hasError||this.$refs.modalDishRestaurant.$refs.restaurant_id.hasError||this.submitDish()},clearDish:function(){}},components:{"modal-buttons":n("5638").default,"modal-dish-name":n("f283").default,"modal-dish-photo":n("4647").default,"modal-dish-restaurant":n("2cd7").default,"modal-dish-food":n("8070").default}});function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={mixins:[c],data:function(){return{showDishFood:!1,dishToSubmit:{name:"",restaurant_id:"",dish_photo:"",calories:"",fat:"",protein:"",carbs:"",grains:"",fruits:"",vegetables:"",oils:"",dairy:"",meat_and_beans:"",dietary_fiber:"",total_sugar:"",sodium:"",potassium:"",calcium:"",magnesium:"",iron:"",zinc:"",phosphorus:"",vitaminA:"",vision_alcohol:"",vitaminE:"",vitaminB1:"",vitaminB2:"",vitaminB6:"",vitaminB12:"",vitaminC:"",nicotin:"",folic_acid:"",fatty_acidS:"",fatty_acidM:"",fatty_acidP:"",cholesterol:"",last_editor:""},containToSubmit:[]}},computed:l({},Object(s["d"])("index",["dish"])),methods:l({},Object(s["b"])("index",["addDish","addContain","setSearchType"]),{submitDish:function(){this.addDish(this.dishToSubmit);for(var t=0;t<this.containToSubmit.length;t++)this.containToSubmit[t].dish=this.dish[this.dish.length-1].id;this.addContain(this.containToSubmit),this.setSearchType(""),this.$emit("close")}}),components:{"food-table":n("c181").default}},f=d,p=n("2877"),h=n("fe09"),m=Object(p["a"])(f,i,o,!1,null,null,null);e["default"]=m.exports;m.options.components=Object.assign({QPage:h["r"],QBtn:h["b"],QDialog:h["g"]},m.options.components||{})},c181:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"dishAdd"==t.searchType?n("q-table",{attrs:{dense:"",title:"食材",data:t.foodList,columns:t.food_nutrient,"row-key":"id"}}):n("q-table",{attrs:{dense:"",title:"食材",data:t.food,columns:t.food_nutrient,"row-key":"id"}})},o=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),r=n.n(a),s=n("2f62");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={props:["containToSubmit","dishToSubmit"],data:function(){return{foodList:[]}},computed:u({},Object(s["d"])("index",["food_nutrient","searchType"]),{},Object(s["c"])("index",["food"])),methods:{getFood:function(t){for(var e=this,n=[],i={name:"總和",quantity:0,calories:0,fat:0,protein:0,carbs:0,grains:0,fruits:0,vegetables:0,oils:0,dairy:0,meat_and_beans:0,dietary_fiber:0,total_sugar:0,sodium:0,potassium:0,calcium:0,magnesium:0,iron:0,zinc:0,phosphorus:0,vitaminA:0,vision_alcohol:0,vitaminE:0,vitaminB1:0,vitaminB2:0,vitaminB6:0,vitaminB12:0,vitaminC:0,nicotin:0,folic_acid:0,fatty_acidS:0,fatty_acidM:0,fatty_acidP:0,cholesterol:0},o=function(i){for(var o=function(o){if(e.food[o].id==t[i].food){var r={id:""};Object.keys(e.food[o]).forEach((function(n){r[n]="id"==n||"name"==n?e.food[o][n]:e.food[o][n]*t[i].quantity})),n.push(r),o=e.food.length}a=o},a=0;a<e.food.length;a++)o(a)},a=0;a<t.length;a++)o(a);for(a=0;a<n.length;a++)i.quantity+=n[a].quantity,i.calories+=n[a].calories,i.fat+=n[a].fat,i.protein+=n[a].protein,i.carbs+=n[a].carbs,i.grains+=n[a].grains,i.fruits+=n[a].fruits,i.vegetables+=n[a].vegetables,i.oils+=n[a].oils,i.dairy+=n[a].dairy,i.meat_and_beans+=n[a].meat_and_beans,i.dietary_fiber+=n[a].dietary_fiber,i.total_sugar+=n[a].total_sugar,i.sodium+=n[a].sodium,i.potassium+=n[a].potassium,i.calcium+=n[a].calcium,i.magnesium+=n[a].magnesium,i.iron+=n[a].iron,i.zinc+=n[a].zinc,i.phosphorus+=n[a].phosphorus,i.vitaminA+=n[a].vitaminA,i.vision_alcohol+=n[a].vision_alcohol,i.vitaminE+=n[a].vitaminE,i.vitaminB1+=n[a].vitaminB1,i.vitaminB2+=n[a].vitaminB2,i.vitaminB6+=n[a].vitaminB6,i.vitaminB12+=n[a].vitaminB12,i.vitaminC+=n[a].vitaminC,i.nicotin+=n[a].nicotin,i.folic_acid+=n[a].folic_acid,i.fatty_acidS+=n[a].fatty_acidS,i.fatty_acidM+=n[a].fatty_acidM,i.fatty_acidP+=n[a].fatty_acidP,i.cholesterol+=n[a].cholesterol;return n.push(i),n}},mounted:function(){var t=this;"dishAdd"==this.searchType?(this.foodList=this.getFood(this.containToSubmit),Object.keys(this.dishToSubmit).forEach((function(e){"name"!=e&&(t.dishToSubmit[e]=t.foodList[t.foodList.length-1][e])}))):this.foodList=this.food}},d=l,f=n("2877"),p=n("fe09"),h=Object(f["a"])(d,i,o,!1,null,null,null);e["default"]=h.exports;h.options.components=Object.assign({QTable:p["y"]},h.options.components||{})},f283:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row q-mt-md"},[n("q-input",{directives:[{name:"select-all",rawName:"v-select-all"}],ref:"name",staticStyle:{width:"300px"},attrs:{outlined:"",value:t.name,rules:[function(t){return!!t||"Field is required"}],autofocus:"",label:"料理"},on:{input:function(e){return t.$emit("update:name",e)}},scopedSlots:t._u([{key:"append",fn:function(){return[t.name?n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){return t.$emit("update:name","")}}}):t._e()]},proxy:!0}])})],1)},o=[],a=n("5c3a"),r={props:["name"],directives:{selectAll:a["a"]}},s=r,c=n("2877"),u=n("fe09"),l=Object(c["a"])(s,i,o,!1,null,null,null);e["default"]=l.exports;l.options.components=Object.assign({QInput:u["l"],QIcon:u["k"]},l.options.components||{})}}]);